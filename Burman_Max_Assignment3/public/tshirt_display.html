<script src="products.js"> </script>
<script>
    // above I am refrencing my products.json file and using this file to load the different products that I am going to sell and siplay on my website
    var params = (new URL(document.location)).searchParams;
// the code below I got help from professor port to make, the params help me to make the input in the textboxes sticky and this makes the values stay so that you do not have to re enter them if there are errors or if you pucsh the back button from the invoice page.
    window.onload = function(){
        if(!params.has('quantity_small0')) return;
  for (i in products) {
    qty_small = params.get(`quantity_small${i}`);
    products_form[`quantity_small${i}`].value = qty_small;
    checkQuantitityTextbox(products_form[`quantity_small${i}`]);
    qty_medium = params.get(`quantity_medium${i}`);
    products_form[`quantity_medium${i}`].value = qty_medium;
    checkQuantitityTextbox(products_form[`quantity_medium${i}`]);
    qty_large = params.get(`quantity_large${i}`);
    products_form[`quantity_large${i}`].value = qty_large;
    checkQuantitityTextbox(products_form[`quantity_large${i}`]);
  }
}
    // this code is similar to lab 12, however I have modified the code to fit for assignment 1 better
    function isNonNegint(q, return_errors = false){
        // this is to check is th values that are put in the textbox are valid or not, to see if it is a number, positive and also if it is a whol number
        errors=[];// this assumes that there are no errors to begin with
        if (q=='') q=0; // this makes that if there is no value put in for a quantity then the value is 0
        if (Number(q) !=q) errors.push('<font color="red">Not a Number</font>')// this checks if the input value is a number or not
        else if(q<0) errors.push('<font color="red">Negative Quantity</font>') // this checks if the value put in is a positiv or negative number
        else if(parseInt(q) !=q) errors.push('<font color="red">Not a Full Value</font>') // this checks if the value put for quantity is a full value or not stopping someone from puttig decimals in the quantity
        return return_errors ? errors : (errors.lenght == 0);
    }

    function checkQuantitityTextbox(quantitytextbox) { // here we are using the isnonnegint function to check if the values put in are correct or not
        errs = isNonNegint(quantitytextbox.value, true);
        document.getElementById(quantitytextbox.name + "_message").innerHTML = errs.join(',');
        
    }

</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Max's T-shirt Shop</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href=https://fonts.googleapis.com/css?family=Oswald|Open+Sans">
    <style type="text/css">
    h1, h2 {
        text-align: center;
    }
    </style>

</head>
<script>// this code for the navbar is taken from w3 school, and I have slightly modified it.</script>
<div class="topnav">
    <a class="active" href="./index.html">Home</a>
    <a href="./tshirt_display.html">T-shirts</a>
    <a href="./bottle_display.html">Bottles</a>
    <a href="./towel_display.html">Towels</a>
    <a href="./glasses_display.html">Glasses</a>
    <a href="./cart.html">My Cart</a>
    <a href="./login_page.html">Login</a>
    <a href="./register.html">Register</a>
  </div>
<body>
    <h1>Welcome to my T-shirt shop</h1>
    <script>
        // the code below was borrowed from the screencast for assignment 1 
    </script>
    <script>
        // the code below is to open a form that is going to be used to be able to put in quantities, have a button to purchase the selected products, and have textboxes where you can put in quantities and be able to validate these quantities.
    </script>
    <form name="products_form" action="./login_page.html" method="GET">
    <div><main>
    <script>
        // displaying the products from my products.json 
        // the labes for the quantity and size was borrowed from the startup on assignment 1 video, the professr helped me a bit with this in combination with the function. this is to display the products, with images and prices. there are also textboxes where the user can put in their own quantities.
        for (i in products){
        document.write(`
        <section class="item">
        <h2>${products[i].item}</h2>
        <br><label>Quantity Small</label></br>
        <input type="text" name="quantity_small${i}" placeholder ="0" onkeyup="checkQuantitityTextbox(this);">
        <span id='quantity_small${i}_message'>Enter a quantity</span>
        <br><label>Quantity Medium</label></br>
        <input type="text" name="quantity_medium${i}" placeholder ="0" onkeyup="checkQuantitityTextbox(this);">
        <span id='quantity_medium${i}_message'>Enter a quantity</span>
        <br><label>Quantity Large</label></br>
        <input type="text" name="quantity_large${i}" placeholder ="0" onkeyup="checkQuantitityTextbox(this);">
        <span id='quantity_large${i}_message'>Enter a quantity</span>
        <br><img src=./images_tshirt/${products[i].image}>
        <p>$${products[i].price.toFixed(2)}</p>
    </section>
        `)
}
    </script>
   </main></div>
<script>
    // the code below is used to make a button and to take me to the invoice page, and use the quantities that I have put in to the different quantities for S,M,L and later I am going to use these quantities to be put in the invoice.
</script>
   <input type="submit" onclick="displayPurchase();" value="Purchase">
   </form>
      
   <h1>Thank You for Shopping!</h1>
</body>
</html>